(e=>{"use strict";e.ammo=(()=>{let t=t=>t||e.document,n=(n,r)=>(t(r).insertAdjacentHTML("beforeend",n.toString()),e.ammo),r=(e,t)=>{Object.keys(e).forEach((n,r)=>{t(e[n],r)})},o=function(e){return null===e},a=function(e){return"function"==typeof e},i=function(e){return Array.isArray(e)},s=function(e,t){return e.hasOwnProperty(t)},u=function(e){return Object.keys(e)},l=(e,t,n)=>{e(n=n||0,r=>{if(!r)return t();l(e,t,++n)})},c=(e,t,n)=>{setTimeout(()=>{e(r=>{if(r)return c(e,t,n);t()})},n)};return{onDomReady:t=>{e.document.addEventListener("DOMContentLoaded",t)},delegateEvent:(e,n,r,o)=>{t(o).addEventListener(e,e=>{e.target&&e.target.classList.contains(n)&&r(e)})},getClosest:(e,n,r)=>t(r).querySelectorAll(e).closest(n),getClass:(e,n)=>t(n).getElementsByClassName(e),getTag:(e,n)=>t(n).getElementsByTagName(e),getId:(e,n)=>t(n).getElementById(e),getEl:(e,n)=>t(n).querySelectorAll(e),filterClass:(e,t)=>{let n=[];return r(t,t=>{t.classList.contains(e)&&n.push(t)}),n},append:(n,r)=>(t(r).insertAdjacentHTML("afterend",n.toString()),e.ammo),appendIn:n,prepend:(n,r)=>(t(r).insertAdjacentHTML("afterbegin",n.toString()),e.ammo),prependIn:(n,r)=>(t(r).insertAdjacentHTML("beforebegin",n.toString()),e.ammo),remove:(t,n)=>((n||t.parentNode).removeChild(t),e.ammo),each:r,filter:(e,t,n)=>{let r=[];return e.filter((e,o)=>{e[t]===n&&r.push({index:o,item:e})}),r},jsonCopy:e=>JSON.parse(JSON.stringify(e)),isObj:function(e){return"object"==typeof e&&!i(e)&&!o(e)},isNull:o,isNum:function(e){return"number"==typeof e&&!isNaN(e)},isFunc:a,isArr:i,isStr:function(e){return"string"==typeof e},isUndef:function(e){return void 0===e},isBool:function(e){return"boolean"==typeof e},hasProp:s,hasMethod:function(e,t){return s(e,t)&&a(t)},hasKey:function(e,t){return u(e).indexOf(t)>-1},getKeys:u,getUrlParam:e=>{let t=new RegExp(`[?&]${e}=([^&]*)`).exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))},randomInclusive:(e,t)=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e),recurIter:l,poll:c,buffer:function(){let e={};return(t,n,r)=>{t||(e[t]="0"),e[t]&&clearTimeout(e[t]),e[t]=setTimeout(r,n)}},extend:function(){let e=arguments[0],t=Object.assign(e,{}),n=[];return u(arguments).forEach((e,t)=>{t>0&&n.push(arguments[e])}),n.forEach(e=>{Object.assign(t,e)}),t},compile:(e,t)=>{let n={start:"{iter}",end:"{/iter}"},r=(e=>{let t=[],r=e.indexOf(n.start),o=e.indexOf(n.end);if(r>-1&&o>-1)for(;r>-1&&o>-1;)t.push({indexStart:r,indexEnd:o,html:e.substring(r,o).replace(n.start,"").replace(n.end,"").replace(/>\s+</g,"><").trim()}),r=e.indexOf(n.start,r+1),o=e.indexOf(n.end,o+1);return t})(e);return((e,t)=>{let o="";return t.forEach(t=>{let a=Object.keys(t),i=e;r.length>0?r.forEach(e=>{let r="",o=e.html;i=i.substring(0,e.indexStart).trim()+n.start+i.substring(e.indexEnd+n.end.length,i.length-1).trim(),a.forEach(n=>{o=e.html.replace(new RegExp("{key}","g"),n),o=o.replace(new RegExp("{value}","g"),t[n]),r+=o}),i=i.replace(n.start,r)}):a.forEach(e=>{i=i.replace(new RegExp("{"+e+"}","g"),t[e])}),o+=i}),o})(e,t)},template:(e,r)=>{let o="",i={start:"{{",end:"}}"},s={id:"data-ammo-id",idValue:"data-ammo-id-value",observer:"data-ammo-observer"},u=/(id:[a-zA-Z]+)/g,l=(e,t)=>`<span ${s.observer}="${e}">${t}</span>`,c=(e,t,n)=>{let r=e.match(u)[0],o=e.indexOf(r);return`${e.substring(0,o-1)}${s.id}=${t} ${s.idValue}=${n}${e.substring(o+r.length+1,e.length)}`},f=(e=>{let t=e.match(u)[0],n=t.indexOf(":");return t.substring(n+1,t.length)})(e),d=(e=>{let t=[],n=e.indexOf(i.start),r=e.indexOf(i.end);if(n>-1&&r>-1)for(;n>-1&&r>-1;){let o={indexStart:0,indexEnd:0,name:"",value:"",context:"",selector:""};o.name=e.substring(n,r).replace(i.start,"").replace(i.end,""),t.push(o),n=e.indexOf(i.start,n+1),r=e.indexOf(i.end,r+1)}return t})(e);return o=((e,t,n,r)=>{let o="";return t.forEach(t=>{let a=e;a=c(a,r,t[r]),n.length>0&&n.forEach(e=>{e.value=t[e.name],a=a.replace(new RegExp(i.start+e.name+i.end,"g"),l(e.name,t[e.name]))}),o+=a}),o.replace(/{/g,"").replace(/}/g,"")})(e,r,d,f),{render(e,t){n(o,e),a(t)&&t()},update(e,n,r){t().querySelectorAll(`[${s.id}="${f}"][${s.idValue}="${e}"]`)[0].querySelectorAll(`[${s.observer}="${n}"]`)[0].textContent=r},getId:e=>e.getAttribute(s.id),getIdValue:e=>e.getAttribute(s.idValue)}},req:e=>{let t=new XMLHttpRequest;if(t.onreadystatechange=(()=>{t.readyState===XMLHttpRequest.DONE&&(200===t.status?e.callback(null,JSON.parse(t.responseText)):e.callback(t.responseText,null))}),t.open(e.type||"GET",e.url),e.data){t.setRequestHeader("Content-Type","application/x-www-form-urlencoded");let n="";u(e.data).forEach(t=>{n+=`${t}=${encodeURIComponent(e.data[t])}`}),t.send(n)}else t.send()},store:function(e){let t;if("string"!=typeof e)return new Error("[Storage] Invalid storage key. Provide a key{string}.");let n={localStorage:{getStorage:function(){return localStorage},setStorageItem:function(e,t){this.getStorage().setItem(e,t)},getStorageItem:function(e){return this.getStorage().getItem(e)},removeStorageItem:function(e){this.getStorage().removeItem(e)}}};t=n.localStorage;let r=function(e){return i(t.getStorageItem(e))},o=function(e,n){t.setStorageItem(e,s(n))},a=function(e){t.removeStorageItem(e)},i=function(e){return JSON.parse(e)},s=function(e){return JSON.stringify(e)};return{setTemplate:function(e,r){return"string"!=typeof e?new Error("[Storage] Invalid template name. Provide a name{string}."):"object"!=typeof r||"function"!=typeof r.setStorageItem||"function"!=typeof r.getStorageItem||"function"!=typeof r.removeStorageItem?new Error("[Storage] Invalid storage API. Provide an API, containing getStorageItem{function}, setStorageItem{function}, removeStorageItem{function}."):(n[e]=r,t=r,this)},getData:function(){return null!==r(e)?r(e):void 0},setData:function(t){return o(e,t),this},removeData:function(){return a(e),this},getItem:function(e){return this.getData()[e]},setItem:function(t,n){let r=this.getData();return r[t]=n,o(e,r),this},removeItem:function(t){let n=this.getData();return n[t]=void 0,o(e,n),this}}},sequence:function(){let e,t,n=[],r=function(o){let a;if(o="number"==typeof o?o:0,!n||o>=n.length)return!0;(a=n[o])({resolve:function(t){e=t,r(++o)},reject:function(e){t=e,r(++o)},response:{value:e,error:t}})};return{chain:function(e){return n&&n.push(e),this},execute:r}},app:function(t){let n=!1,r=!1;if("object"==typeof t&&null!==t&&(n=!0),n&&"boolean"==typeof t.global&&(r=t.global),r&&!n||r&&n&&!t.name)return new Error("[Initialzr] Invalid initialization. Global applications require a name. Pass a name as part of the app's config.");let o={config:t||{},nodes:{}},a={default:["events","renderers","actions"],app:["events","actions","common","modules","core"]},i=function(){let e=function(e){let t=o.nodes;return(Array.isArray(e)?e:[""+e]).map(function(e){t.hasOwnProperty(e)||(t[e]={})}),this},t=function(e,t,n){let r=o.nodes;return r.hasOwnProperty(e)&&!r[e].hasOwnProperty(t)&&"function"==typeof n&&(r[e][t]=n),this},n=function(e,t){let n=o.nodes;return!(!n.hasOwnProperty(e)||!n[e].hasOwnProperty(t)||"function"!=typeof n[e][t])&&n[e][t]},r=function(e){return!!o.nodes.hasOwnProperty(e)&&{node:function(n,r){return t(e,n,r),this},configure:r}};return{schema:function(t){return a.hasOwnProperty(t)&&e(a[t]),this},addSchema:function(e,t){return!a.hasOwnProperty(e)&&Array.isArray(t)&&(a[e]=t),this},augment:e,configure:r,addNode:t,getNode:n,callNode:function(e,t,r){let o=void 0!==r?r:{},a=n(e,t);return a&&a(o),this},nodeExists:function(e,t){return"function"==typeof n(e,t)},getNodes:function(e){return e&&o.nodes.hasOwnProperty(e)?o.nodes[e]:o.nodes},getConfig:function(e){let t=o.config;return!!t.hasOwnProperty(e)&&t[e]}}};if(!r)return i();!function(t){e[o.config.name]=e[o.config.name]||t}(i())}}})()})(window);